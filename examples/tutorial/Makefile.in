#
#  Copyright (C) 2012, Northwestern University and Argonne National Laboratory
#  See COPYRIGHT notice in top-level directory.
#
# $Id$

srcdir = @srcdir@
VPATH  = @srcdir@

include ../../macros.make

INCLUDES  = -I../../src/lib
FPPFLAGS += -I../../src/libf
LDFLAGS  += -L../../src/lib
LIBS     += -lpnetcdf

C_SRCS = pnetcdf-write-from-master.c pnetcdf-read-from-master.c \
         pnetcdf-write-nfiles.c pnetcdf-read-nfiles.c \
         pnetcdf-write-standard.c pnetcdf-read-standard.c \
         pnetcdf-write-flexible.c pnetcdf-read-flexible.c \
         pnetcdf-write-nb.c pnetcdf-read-nb.c \
         pnetcdf-write-buffered.c

F_SRCS = pnetcdf-write-bufferedf.F

PROGS  = $(C_SRCS:.c=)
OBJS   = $(C_SRCS:.c=.o)
ifeq (@has_fortran@, yes)
PROGS += $(F_SRCS:.F=)
OBJS  += $(F_SRCS:.F=.o)
endif

GARBAGE      = $(PROGS)
PACKING_LIST = $(C_SRCS) $(F_SRCS) Makefile.in

all: $(PROGS)

pnetcdf-write-from-master: pnetcdf-write-from-master.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-read-from-master: pnetcdf-read-from-master.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-nfiles: pnetcdf-write-nfiles.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-read-nfiles: pnetcdf-read-nfiles.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-standard: pnetcdf-write-standard.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-read-standard: pnetcdf-read-standard.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-flexible: pnetcdf-write-flexible.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-read-flexible: pnetcdf-read-flexible.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-nb: pnetcdf-write-nb.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-read-nb: pnetcdf-read-nb.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-buffered: pnetcdf-write-buffered.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnetcdf-write-bufferedf: pnetcdf-write-bufferedf.o $(LIBRARY)
	$(LINK.F) $< $(LDFLAGS) $(LIBS)

include $(srcdir)/../../rules.make

