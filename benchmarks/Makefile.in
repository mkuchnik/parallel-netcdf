#
#  Copyright (C) 2012, Northwestern University and Argonne National Laboratory
#  See COPYRIGHT notice in top-level directory.
#
# $Id$

srcdir = @srcdir@
VPATH = @srcdir@

include ../macros.make

INCLUDES	= -I$(srcdir)/../src/lib -I../src/lib -I$(srcdir)

ld_math		= $(MATHLIB)

C_SRCS		= aggregation.c \
		  write_block_read_column.c

F90_SRCS	=

C_OBJS		= $(C_SRCS:.c=.o)
F90_OBJS	= $(F90_SRCS:.F90=.o)
F90FLAGS        = -I$(srcdir)/../src/libf -I../src/libf

PROGS		= aggregation write_block_read_column
OBJS		= $(C_OBJS)
ifeq (@has_fortran@, yes)
PROGS		+=
OBJS		+= $(F90_OBJS)
endif

GARBAGE         = $(PROGS)

ld_pnetcdf      = -L$(srcdir)/../src/lib -L../src/lib -lpnetcdf

PACKING_LIST	=  $(SRCS) \
		    Makefile.in

all: $(PROGS)

install:

uninstall:

aggregation: aggregation.o
	$(LINK.c) -o $@ $< $(ld_pnetcdf) $(ld_math) $(LIBS)

write_block_read_column: write_block_read_column.o
	$(LINK.c) -o $@ $< $(ld_pnetcdf) $(ld_math) $(LIBS)

include $(srcdir)/depend


clean:
	$(RM) -f *.o core* *.nc $(GARBAGE)

distclean:
	$(RM) -f *.o core* *.nc $(GARBAGE)
	$(RM) -f Makefile

