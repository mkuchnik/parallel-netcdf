#
# Copyright (C) 2012, Northwestern University and Argonne National Laboratory
# See COPYRIGHT notice in top-level directory.
#
# $Id$
#
# @configure_input@

srcdir = @srcdir@
VPATH = @srcdir@

include ../macros.make

MANUAL_C   = pnetcdf.3
MANUAL_F77 = pnetcdf_f77.3
MANUAL_F90 = $(srcdir)/pnetcdf_f90.3

MANUAL = $(MANUAL_C)
ifeq (@has_fortran@, yes)
MANUAL += $(MANUAL_F77)
MANUAL += $(MANUAL_F90)
endif

PACKING_LIST = pnetcdf.m4 $(MANUAL_F90) \
               Makefile.in

GARBAGE = $(MANUAL_C) $(MANUAL_F77)

all: $(MANUAL)

pnetcdf.3: pnetcdf.m4
	$(M4) $(M4FLAGS) -DAPI=C $? > $@  || $(RM) -f $@

pnetcdf_f77.3: pnetcdf.m4
	$(M4) $(M4FLAGS) -DAPI=F $? > $@  || $(RM) -f $@

test:

install: $(MANUAL)
	$(INSTALL) -d -m 755 $(MANDIR)/man3
	@for i in $(MANUAL) ; do ( \
	    fn=`basename $$i` ; \
	    $(INSTALL_DATA) $$i $(MANDIR)/man3/$$fn \
	; ) ; done

uninstall:
	@for i in $(MANUAL) ; do ( \
	    fn=`basename $$i` ; \
	    $(RM) -f $(MANDIR)/man3/$$fn \
	; ) ; done

include $(srcdir)/../rules.make
