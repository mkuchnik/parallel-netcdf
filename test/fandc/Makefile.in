#
#  Copyright (C) 2003, Northwestern University and Argonne National Laboratory
#  See COPYRIGHT notice in top-level directory.
#
#  $Id$

srcdir = @srcdir@
VPATH  = @srcdir@

include ../../macros.make

INCLUDES  = -I../../src/lib -I$(srcdir)/../common
FPPFLAGS += -I../../src/libf
LDFLAGS  += -L../../src/lib -L../common
LIBS     += -ltestutils -lpnetcdf $(MATHLIB)

C_SRCS = pnctest.c \
         csnap.c

F90_SRCS = pnctestf.f90 \
           pnf_test.f90

PROGS  = $(C_SRCS:.c=)
OBJS   = $(C_SRCS:.c=.o)
ifeq (@has_fortran@, yes)
PROGS += $(F90_SRCS:.f90=)
OBJS  += $(F90_SRCS:.f90=.o)
endif

GARBAGE      = $(PROGS) *.nc
PACKING_LIST = $(C_SRCS) $(F90_SRCS) Makefile.in

all: $(PROGS)

pnctest: pnctest.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

csnap:  csnap.o $(LIBRARY)
	$(LINK.c) $< $(LDFLAGS) $(LIBS)

pnctestf: pnctestf.o $(LIBRARY)
	$(LINK.F) $< $(LDFLAGS) $(LIBS)

pnf_test:  pnf_test.o $(LIBRARY)
	$(LINK.F) $< $(LDFLAGS) $(LIBS)

include $(srcdir)/../../rules.make

