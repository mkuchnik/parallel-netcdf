srcdir		= @srcdir@
VPATH		= @srcdir@

INCDIR		= $(srcdir)/../../src/lib
LIBDIR		= ../../src/lib

INCLUDES	= -I$(INCDIR) 

CC		= @MPICC@
CFLAGS          = @CFLAGS@ $(INCLUDES) 
FC		= @MPIF77@
FFLAGS          = @FFLAGS@ $(INCLUDES) -I../../src/libf


SRCS		= $(srcdir)/ncmpi_vars_null_stride.c $(srcdir)/vecors.c \
			$(srcdir)/bigrecords.F 
PROGS		= ncmpi_vars_null_stride vectors bigrecords 
LDFLAGS		= -L$(LIBDIR) @LDFLAGS@
LIBS		= -lpnetcdf @LIBS@

.c.o:
	$(CC) $(CFLAGS) -c $<
.F.o:
	$(FC) $(FFLAGS) -c $<

all:		$(PROGS)

ncmpi_vars_null_stride: ncmpi_vars_null_stride.o
	$(CC) -o $@ $@.o $(LDFLAGS) $(LIBS)

vectors: vectors.o
	$(CC) -o $@ $@.o $(LDFLAGS) $(LIBS)

bigrecords: bigrecords.o
	$(FC) -o $@ $@.o $(LDFLAGS) $(LIBS)

clean:
		rm -f *.o $(PROGS) *.nc

test: ncmpi_vars_null_stride vectors bigrecords
	./ncmpi_vars_null_stride test.nc && echo '*** ncmpi_vars_null_stride: Success ***'
	

testing: test
