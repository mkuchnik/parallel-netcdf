#
#  Copyright (C) 2003, Northwestern University and Argonne National Laboratory
#  See COPYRIGHT notice in top-level directory.
#
# $Id$

srcdir = @srcdir@
VPATH = @srcdir@

include ../macros.make

SUBDIRS = common \
          nc_test \
          nf_test \
          test_int \
          test_float \
          test_double \
          test_double_int \
          test_dtype \
          C \
          fandc \
          largefile \
          nonblocking \
          test_inq_format \
          test_check_header \
          testcases \
          data

all:
	set -e; for i in $(SUBDIRS); do ( cd $$i && $(MAKE) all ; ) ; done

clean:
	set -e; for i in $(SUBDIRS); do ( cd $$i && $(MAKE) clean ; ) ; done

distclean:
	set -e; for i in $(SUBDIRS); do ( cd $$i && $(MAKE) distclean ; ) ; done
	$(RM) -f Makefile
	if [ @srcdir@ != . ] ; then rmdir $(SUBDIRS) ; fi

# Eventually, this target will run all of the relevant tests
check testing:
	# no tests in 'common' just common routines
	cd common && make  
	cd C && make testing
	cd nonblocking && make testing
	cd testcases && make testing
	cd nc_test && make testing
	if [ @has_fortran@ = yes ] ; then cd nf_test   && make testing ;     fi
	if [ @has_fortran@ = yes ] ; then cd testcases && make testing-f ;   fi
	if [ @has_mpicxx@  = yes ] ; then cd testcases && make testing-cxx ; fi

verbose_check verbose_testing:
	# no tests in 'common' just common routines
	cd common && make  
	cd C && make verbose_testing
	cd nonblocking && make verbose_testing
	cd testcases && make verbose_testing
	cd nc_test && make verbose_testing
	if [ @has_fortran@ = yes ] ; then cd nf_test   && make verbose_testing ;     fi
	if [ @has_fortran@ = yes ] ; then cd testcases && make verbose_testing-f ;   fi
	if [ @has_mpicxx@  = yes ] ; then cd testcases && make verbose_testing-cxx ; fi

